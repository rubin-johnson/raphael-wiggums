You are synthesizing per-module analysis into a coherent architectural understanding.

## Repo Map
{repo_map}

## Per-Module Analysis
{module_summaries}

{retry_context}

## Your Task
Write a concise architectural understanding document in markdown with these exact sections:

### Architecture Overview
2-3 paragraphs describing what this codebase does and how it is structured.

### Module Dependency Map
Which modules depend on which. Text format, not a diagram. Be specific about direction.

### Complexity Hotspots
Top 3-5 areas of highest complexity. Name specific files and functions.

### Duplication & Coupling
Specific instances where code does the same thing in multiple places, or modules are too tightly coupled.

### Simplification Opportunities
Ordered by impact (highest first). Each entry must name the specific file/function and describe the before/after.

### Surprising Design Choices
Things that seem overcomplicated for what they accomplish. Be specific, not vague.

Be specific throughout. Name exact files and functions. If you don't know, say so.
